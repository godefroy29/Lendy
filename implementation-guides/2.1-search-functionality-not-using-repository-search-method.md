# 2.1 Search Functionality Not Using Repository Search Method

**Priority:** High  
**Category:** Bug Fixes  
**Status:** ✅ Implemented  
**Difficulty:** 5 ⭐⭐⭐⭐⭐  
**Modification Location:** Flutter Code

## Description

The search in `ItemsListScreen` is done client-side, but there's a `searchItems` method in the repository that's not being used.

## Implementation Details

- Update `ItemsListScreen` to use `repository.searchItems()` instead of client-side filtering
- Create a search provider that calls `searchItems` with the query
- Debounce search input to avoid excessive API calls (use `debounce` from `flutter_hooks` or custom implementation)
- Update search to work with both tabs (lent/returned)
- Handle empty search query (show all items)
- Show loading state during search
- Handle search errors gracefully

## Files to Modify

- **Modify:** `lendy/lib/presentation/screens/items_list_screen.dart`
- **Modify:** `lendy/lib/presentation/providers/items_provider.dart` (add search provider)

## Dependencies

None

## Implementation Steps

1. Create `searchItemsProvider` in `items_provider.dart` using `FutureProvider.family`
2. Add debouncing to search input in `ItemsListScreen`
3. Replace client-side filtering with calls to `searchItemsProvider`
4. Handle loading and error states for search
5. Reset search when query is cleared
6. Test search with both lent and returned items
